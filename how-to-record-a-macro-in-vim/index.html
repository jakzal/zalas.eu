<!DOCTYPE html>
<html lang="en">
    <head>
        <title>How to record a macro in vim? &mdash; Jakub Zalas &mdash; Agile Software Engineer</title>
        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="verify-v1" content="PBznb5+bhxbUdD7HvioYYudpqitFdLDgjQTv8SwALq4=" />            <meta name="robots" content="index, follow">
        <link rel="shortcut icon" href="//zalas.eu/favicon.ico" />
        <link rel="alternate" type="application/atom+xml" href="//zalas.eu/atom.xml" title="Jakub Zalas activity feed" />
        <link href="//zalas.eu/components/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="//zalas.eu/css/base.css" rel="stylesheet" type="text/css" />
        <link href="//zalas.eu/css/code.css" rel="stylesheet" type="text/css" />
        <link href="//zalas.eu/components/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
                                    </head>
    <body>
        <div class="container">
            <div class="row">
                        <section itemscope itemtype="http://schema.org/BlogPosting">
        <h1 itemprop="name">How to record a macro in vim?</h1>
        <div class="post-date pull-right">
            <time itemprop="datePublished" content="2009-08-01" datetime="2009-08-01">01 Aug 2009</time>
        </div>
        <ul class="list-unstyled list-inline post-tag-cloud">
                        <li>
                <span class="glyphicon glyphicon-tag"></span>
                <a href="//zalas.eu/tag/best-practices/">
                    <span class="list-group-item-heading">best-practices</span>
                </a>
            </li>
                        <li>
                <span class="glyphicon glyphicon-tag"></span>
                <a href="//zalas.eu/tag/productivity/">
                    <span class="list-group-item-heading">productivity</span>
                </a>
            </li>
                        <li>
                <span class="glyphicon glyphicon-tag"></span>
                <a href="//zalas.eu/tag/vim/">
                    <span class="list-group-item-heading">vim</span>
                </a>
            </li>
                    </ul>

                <div class="alert alert-danger">
            <strong>Warning</strong>: This blog post was written a long time ago and might be no longer relevant.
        </div>
        
        <section class="content" itemprop="articleBody"><p><a href="http://en.wikipedia.org/wiki/Macro_%28computer_science%29">Macro</a> is a sequence of instructions performed as a one step. In programming it helps automating the repeatable tasks which makes them less boring and less error-prone. Instead of performing the same actions over and over again, it's better to record them as a macro. Once macro is saved it can be run as many times as needed. <a href="http://www.vim.org/">Vim</a> as a one of most powerful editors has macro support built in.</p>

<div class="text-center">
    <object width="425" height="344" data="http://www.youtube.com/v/6d4tZqqQm6s&amp;hl=en&amp;fs=1" type="application/x-shockwave-flash">
        <param name="allowFullScreen" value="true" />
        <param name="allowscriptaccess" value="always" />
        <param name="src" value="http://www.youtube.com/v/6d4tZqqQm6s&amp;hl=en&amp;fs=1" />
        <param name="allowfullscreen" value="true" />
    </object>
</div>

<p>To record a macro in vim you need to:</p>

<ul>
<li>start macro recording: <em>qa</em></li>
<li>perform chain of repeatable actions: <em>(regular vim commands)</em></li>
<li>stop recording process: <em>q</em></li>
</ul>

<h2 id="defining-the-automation">Defining the automation</h2>

<p>First, it's good to think what actually should be recorded. For purpose of this example let's say you have a file with a list of songs and artists you want to put on your website. Each row should be shown as a separate list item and song title has to be formatted as an italic text. The file contents is as below:</p>

<pre><code>"All Along the Watchtower", Jimi Hendrix
"Smells Like Teen Spirit", Nirvana
"Oops!... I did it again", Britney Spears
"A Hard Day's Night", The Beatles
"One", Metallica
"Lasy Pomorza", Behemoth
</code></pre>

<p>To format first line of file in vim you could perform the following commands:</p>

<ul>
<li><p>Go to the beginning of line by pressing <em>^</em></p>

<p><code>"All Along the Watchtower", Jimi Hendrix</code></p></li>
<li><p>Turn on insert mode (<em>i</em>), add two spaces and opening html tags: <code>&lt;li&gt;&lt;i&gt;</code></p>

<p><code>&lt;li&gt;&lt;i&gt;"All Along the Watchtower", Jimi Hendrix</code></p></li>
<li><p>Exit insert mode (<em>ESC</em>), move the cursor to the next comma location: <em>f,</em></p></li>
<li><p>Turn on insert mode (<em>i</em>) and add italics ending tag: <code>&lt;/i&gt;</code></p>

<p><code>&lt;li&gt;&lt;i&gt;"All Along the Watchtower"&lt;/i&gt;, Jimi Hendrix</code></p></li>
<li><p>Exit insert mode (<em>ESC</em>), go to the end of line in insert mode (<em>A</em>) and add list closing tag <code>&lt;/li&gt;</code></p>

<p><code>&lt;li&gt;&lt;i&gt;"All Along the Watchtower"&lt;/i&gt;, Jimi Hendrix&lt;/li&gt;</code></p></li>
<li><p>Leave insert mode (<em>ESC</em>) and go to the next line</p></li>
</ul>

<p>The rest of lines can be formatted the same way. As you can see it could be quite a big and tedious job, especially with a large file. It's better when computer does it for us.</p>

<h2 id="entering-the-macro-recording-process">Entering the macro recording process</h2>

<p>To start macro recording process press</p>

<pre><code>qa
</code></pre>

<p>in normal mode. '<em>a</em>' is a register where your macro will be saved. You can choose any letter you want.</p>

<h2 id="recording-the-macro">Recording the macro</h2>

<p>Now, perform the steps explained before to format the first line. It's only needed to do it once. It's important that we end up in a state that allows us running next iteration.</p>

<h2 id="saving-the-macro">Saving the macro</h2>

<p>To save the macro press</p>

<pre><code>q
</code></pre>

<p>This will exit macro recording process.</p>

<h2 id="running-the-macro">Running the macro</h2>

<p>While recording the macro we have formatted the first line. Assuming that macro was saved in 'a' register we can process next line by pressing:</p>

<pre><code>@a
</code></pre>

<p>To proceed with remaining four lines of file it's possible to specify number of times macro has to be run:</p>

<pre><code>4@a
</code></pre>

<p>Result will look like following:</p>

<pre><code>  &lt;li&gt;&lt;i&gt;"All Along the Watchtower"&lt;/i&gt;, Jimi Hendrix&lt;/li&gt;
  &lt;li&gt;&lt;i&gt;"Smells Like Teen Spirit"&lt;/i&gt;, Nirvana&lt;/li&gt;
  &lt;li&gt;&lt;i&gt;"Oops!... I did it again"&lt;/i&gt;, Britney Spears&lt;/li&gt;
  &lt;li&gt;&lt;i&gt;"A Hard Day's Night"&lt;/i&gt;, The Beatles&lt;/li&gt;
  &lt;li&gt;&lt;i&gt;"One"&lt;/i&gt;, Metallica&lt;/li&gt;
  &lt;li&gt;&lt;i&gt;"Lasy Pomorza"&lt;/i&gt;, Behemoth&lt;/li&gt;
</code></pre>

<h2 id="summary">Summary</h2>

<p>Programmer's job is to write programs. By performing repeatable tasks manually we are doing a bad job, because it's a computer's job. Such actions make us numb as there's not much thinking involved. Furthermore we make mistakes and computer repeats the operations with a deadly precision. Incorporating macros in your development skill set will improve your productivity.</p>

<p>If you don't use vim there are macro recorders for most of popular IDEs available. If your editor doesn't support it than still it's possible to use standalone desktop applications which can be easily integrated with tools of your preference.</p>

<p>Other way of performing similar tasks in vim is using regular expressions but it's a subject for another post.</p>
</section>
    </section>


        <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'zalas';
        var disqus_identifier = 'how-to-record-a-macro-in-vim';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
            </div>
        </div>
                                <script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-607315-8', 'auto');
                ga('send', 'pageview');
            </script>
            
            
            <script src="//zalas.eu/components/highlightjs/highlight.pack.js"></script>
            <script>hljs.initHighlightingOnLoad();</script>
                    </body>
</html>
